+ ctlsock=/run/vpp/cli-vpp1.sock
+ ip netns add client
+ ip link add vpp0 type veth peer name client
+ ip link set dev client netns client
+ ip netns exec client ip link set dev lo up
+ ip netns exec client ip link set dev client up
+ ip netns exec client ip addr add 10.0.0.1/24 dev client
+ ip link set dev vpp0 up
+ ip netns exec client tc qdisc add dev client root netem loss 15% delay 100ms 300ms duplicate 10%
+ ip netns add server
+ ip link add vpp1 type veth peer name server
+ ip link set dev server netns server
+ ip netns exec server ip link set dev lo up
+ ip netns exec server ip link set dev server up
+ ip netns exec server ip addr add 10.0.1.1/24 dev server
+ ip link set dev vpp1 up
+ mkdir /www
+ truncate -s 100 /www/dl
+ cat
+ ip netns exec server nginx
+ echo run
+ config_vpp
+ echo bt
+ [[ ! -e /run/vpp/cli-vpp1.sock ]]
+ sleep 1
+ gdb -x /tmp/cmds --args /usr/bin/vpp unix '{' nodaemon cli-listen /run/vpp/cli-vpp1.sock '}' api-segment '{' prefix vpp1 '}' cpu '{' workers 0 '}'
GNU gdb (Ubuntu 8.1-0ubuntu3.2) 8.1.0.20180409-git
Copyright (C) 2018 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-linux-gnu".
Type "show configuration" for configuration details.
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>.
Find the GDB manual and other documentation resources online at:
<http://www.gnu.org/software/gdb/documentation/>.
For help, type "help".
Type "apropos word" to search for commands related to "word"...
Reading symbols from /usr/bin/vpp...Reading symbols from /usr/lib/debug/.build-id/f9/317128c2a0835e72bf8bf269def2f2c945fb28.debug...done.
done.
[Thread debugging using libthread_db enabled]
Using host libthread_db library "/lib/x86_64-linux-gnu/libthread_db.so.1".
+ [[ ! -e /run/vpp/cli-vpp1.sock ]]
+ sleep 1
/usr/bin/vpp[47]: clib_elf_parse_file: open `linux-vdso.so.1': No such file or directory
/usr/bin/vpp[47]: clib_elf_parse_file: open `linux-vdso.so.1': No such file or directory
/usr/bin/vpp[47]: vat-plug/load: vat_plugin_register: oddbuf plugin not loaded...
/usr/bin/vpp[47]: vat-plug/load: vat_plugin_register: oddbuf plugin not loaded...

+ [[ ! -e /run/vpp/cli-vpp1.sock ]]
+ ctl create host-interface name vpp0
+ vppctl -s /run/vpp/cli-vpp1.sock create host-interface name vpp0
host-vpp0
+ ctl set interface state host-vpp0 up
+ vppctl -s /run/vpp/cli-vpp1.sock set interface state host-vpp0 up
+ ctl set interface ip address host-vpp0 10.0.0.2/24
+ vppctl -s /run/vpp/cli-vpp1.sock set interface ip address host-vpp0 10.0.0.2/24
+ ctl create host-interface name vpp1
+ vppctl -s /run/vpp/cli-vpp1.sock create host-interface name vpp1
host-vpp1
+ ctl set interface state host-vpp1 up
+ vppctl -s /run/vpp/cli-vpp1.sock set interface state host-vpp1 up
+ ctl set interface ip address host-vpp1 10.0.1.2/24
+ vppctl -s /run/vpp/cli-vpp1.sock set interface ip address host-vpp1 10.0.1.2/24
+ ctl http static server www-root /www uri tcp://0.0.0.0/80 cache-size 2m
+ vppctl -s /run/vpp/cli-vpp1.sock http static server www-root /www uri tcp://0.0.0.0/80 cache-size 2m
+ ctl test proxy server server-uri tcp://10.0.0.2/555 client-uri tcp://10.0.1.1/666
+ vppctl -s /run/vpp/cli-vpp1.sock test proxy server server-uri tcp://10.0.0.2/555 client-uri tcp://10.0.1.1/666
/usr/bin/vpp[47]: proxy_reset_callback:208: Reset session [0:518][T] 10.0.0.2:555->10.0.0.1:36524           CLOSED         
 index: 516 cfg: TSO off flags:  timers: 
 snd_una 1 snd_nxt 1 snd_una_max 1 rcv_nxt 41 rcv_las 41
 snd_wnd 29312 rcv_wnd 64512 rcv_wscale 10 snd_wl1 146247572 snd_wl2 1
 flight size 0 out space 4350 rcv_wnd_av 64512 tsval_recent 1951698662
 tsecr 798753719 tsecr_last_ack 0 tsval_recent_age 14 snd_mss 1448
 rto 329 rto_boff 1 srtt 125 us 304.000 rttvar 51 rtt_ts 0.0000 rtt_seq 3845997571
 next_node 0 opaque 0x0 fib_index 0
 cong:   none algo cubic cwnd 4350 ssthresh 2147483647 bytes_acked 1
         cc space 4350 prev_cwnd 0 prev_ssthresh 0
         snd_cong 3845997571 dupack 0 limited_tx 3845997571
         rxt_bytes 0 rxt_delivered 0 rxt_head 3845997571 rxt_ts 798754037
         prr_start 3845997571 prr_delivered 0 prr space 0
 pacer: rate 34800 bucket 0 t/p .035 last_update .012 s idle 6250
 transport: flags 0x1
 Rx fifo: cursize 0 nitems 65496 has_event 1 min_alloc 8192
          head 40 tail 40 segment manager 2
          vpp session 1933 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 Tx fifo: cursize 0 nitems 65536 has_event 1 min_alloc 8192
          head 361 tail 361 segment manager 2
          vpp session 518 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 session: state: transport-closing opaque: 0x0 flags: custom-fifo-tuning
/usr/bin/vpp[47]: proxy_reset_callback:208: Reset session [0:518][T] 10.0.0.2:555->10.0.0.1:36524           CLOSED         
 index: 516 cfg: TSO off flags:  timers: 
 snd_una 1 snd_nxt 1 snd_una_max 1 rcv_nxt 41 rcv_las 41
 snd_wnd 29312 rcv_wnd 64512 rcv_wscale 10 snd_wl1 146247572 snd_wl2 1
 flight size 0 out space 4350 rcv_wnd_av 64512 tsval_recent 1951698662
 tsecr 798753719 tsecr_last_ack 0 tsval_recent_age 14 snd_mss 1448
 rto 329 rto_boff 1 srtt 125 us 304.000 rttvar 51 rtt_ts 0.0000 rtt_seq 3845997571
 next_node 0 opaque 0x0 fib_index 0
 cong:   none algo cubic cwnd 4350 ssthresh 2147483647 bytes_acked 1
         cc space 4350 prev_cwnd 0 prev_ssthresh 0
         snd_cong 3845997571 dupack 0 limited_tx 3845997571
         rxt_bytes 0 rxt_delivered 0 rxt_head 3845997571 rxt_ts 798754037
         prr_start 3845997571 prr_delivered 0 prr space 0
 pacer: rate 34800 bucket 0 t/p .035 last_update .012 s idle 6250
 transport: flags 0x1
 Rx fifo: cursize 0 nitems 65496 has_event 1 min_alloc 8192
          head 40 tail 40 segment manager 2
          vpp session 1933 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 Tx fifo: cursize 0 nitems 65536 has_event 1 min_alloc 8192
          head 361 tail 361 segment manager 2
          vpp session 518 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 session: state: transport-closing opaque: 0x0 flags: custom-fifo-tuning
/usr/bin/vpp[47]: proxy_reset_callback:208: Reset session [0:985][T] 10.0.0.2:555->10.0.0.1:42892           CLOSED         
 index: 983 cfg: TSO off flags:  timers: 
 snd_una 1 snd_nxt 362 snd_una_max 362 rcv_nxt 41 rcv_las 41
 snd_wnd 29312 rcv_wnd 64512 rcv_wscale 10 snd_wl1 2108251750 snd_wl2 1
 flight size 361 out space 3989 rcv_wnd_av 64512 tsval_recent 1951698837
 tsecr 798753827 tsecr_last_ack 0 tsval_recent_age 47 snd_mss 1448
 rto 316 rto_boff 0 srtt 124 us 292.000 rttvar 48 rtt_ts 10.0281 rtt_seq 362
 next_node 0 opaque 0x0 fib_index 0
 cong:   none algo cubic cwnd 4350 ssthresh 2147483647 bytes_acked 1
         cc space 3989 prev_cwnd 0 prev_ssthresh 0
         snd_cong 4284746241 dupack 0 limited_tx 4284746241
         rxt_bytes 0 rxt_delivered 0 rxt_head 4284746241 rxt_ts 798754166
         prr_start 4284746241 prr_delivered 0 prr space 0
 pacer: rate 35080 bucket 1099 t/p .035 last_update .006 s idle 6200
 transport: flags 0x1
 Rx fifo: cursize 0 nitems 65496 has_event 0 min_alloc 8192
          head 40 tail 40 segment manager 2
          vpp session 2447 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 Tx fifo: cursize 0 nitems 65536 has_event 0 min_alloc 8192
          head 361 tail 361 segment manager 2
          vpp session 985 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 session: state: transport-closing opaque: 0x0 flags: custom-fifo-tuning
/usr/bin/vpp[47]: proxy_reset_callback:208: Reset session [0:985][T] 10.0.0.2:555->10.0.0.1:42892           CLOSED         
 index: 983 cfg: TSO off flags:  timers: 
 snd_una 1 snd_nxt 362 snd_una_max 362 rcv_nxt 41 rcv_las 41
 snd_wnd 29312 rcv_wnd 64512 rcv_wscale 10 snd_wl1 2108251750 snd_wl2 1
 flight size 361 out space 3989 rcv_wnd_av 64512 tsval_recent 1951698837
 tsecr 798753827 tsecr_last_ack 0 tsval_recent_age 47 snd_mss 1448
 rto 316 rto_boff 0 srtt 124 us 292.000 rttvar 48 rtt_ts 10.0281 rtt_seq 362
 next_node 0 opaque 0x0 fib_index 0
 cong:   none algo cubic cwnd 4350 ssthresh 2147483647 bytes_acked 1
         cc space 3989 prev_cwnd 0 prev_ssthresh 0
         snd_cong 4284746241 dupack 0 limited_tx 4284746241
         rxt_bytes 0 rxt_delivered 0 rxt_head 4284746241 rxt_ts 798754166
         prr_start 4284746241 prr_delivered 0 prr space 0
 pacer: rate 35080 bucket 1099 t/p .035 last_update .006 s idle 6200
 transport: flags 0x1
 Rx fifo: cursize 0 nitems 65496 has_event 0 min_alloc 8192
          head 40 tail 40 segment manager 2
          vpp session 2447 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 Tx fifo: cursize 0 nitems 65536 has_event 0 min_alloc 8192
          head 361 tail 361 segment manager 2
          vpp session 985 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 session: state: transport-closing opaque: 0x0 flags: custom-fifo-tuning
/usr/bin/vpp[47]: proxy_reset_callback:208: Reset session [0:509][T] 10.0.0.2:555->10.0.0.1:33138           CLOSED         
 index: 507 cfg: TSO off flags:  timers: 
 snd_una 1 snd_nxt 1 snd_una_max 1 rcv_nxt 41 rcv_las 41
 snd_wnd 29312 rcv_wnd 64512 rcv_wscale 10 snd_wl1 368650061 snd_wl2 1
 flight size 0 out space 4350 rcv_wnd_av 64512 tsval_recent 1951698685
 tsecr 798753717 tsecr_last_ack 0 tsval_recent_age 27 snd_mss 1448
 rto 554 rto_boff 1 srtt 150 us 504.000 rttvar 101 rtt_ts 0.0000 rtt_seq 2803340841
 next_node 0 opaque 0x0 fib_index 0
 cong:   none algo cubic cwnd 4350 ssthresh 2147483647 bytes_acked 1
         cc space 4350 prev_cwnd 0 prev_ssthresh 0
         snd_cong 2803340841 dupack 0 limited_tx 2803340841
         rxt_bytes 0 rxt_delivered 0 rxt_head 2803340841 rxt_ts 798754248
         prr_start 2803340841 prr_delivered 0 prr space 0
 pacer: rate 29000 bucket 0 t/p .029 last_update .009 s idle 7500
 transport: flags 0x1
 Rx fifo: cursize 40 nitems 65536 has_event 0 min_alloc 8192
          head 0 tail 40 segment manager 2
          vpp session 509 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 Tx fifo: cursize 0 nitems 65536 has_event 0 min_alloc 8192
          head 0 tail 0 segment manager 2
          vpp session 509 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 0
 session: state: transport-closing opaque: 0x0 flags: custom-fifo-tuning
/usr/bin/vpp[47]: proxy_reset_callback:208: Reset session [0:509][T] 10.0.0.2:555->10.0.0.1:33138           CLOSED         
 index: 507 cfg: TSO off flags:  timers: 
 snd_una 1 snd_nxt 1 snd_una_max 1 rcv_nxt 41 rcv_las 41
 snd_wnd 29312 rcv_wnd 64512 rcv_wscale 10 snd_wl1 368650061 snd_wl2 1
 flight size 0 out space 4350 rcv_wnd_av 64512 tsval_recent 1951698685
 tsecr 798753717 tsecr_last_ack 0 tsval_recent_age 27 snd_mss 1448
 rto 554 rto_boff 1 srtt 150 us 504.000 rttvar 101 rtt_ts 0.0000 rtt_seq 2803340841
 next_node 0 opaque 0x0 fib_index 0
 cong:   none algo cubic cwnd 4350 ssthresh 2147483647 bytes_acked 1
         cc space 4350 prev_cwnd 0 prev_ssthresh 0
         snd_cong 2803340841 dupack 0 limited_tx 2803340841
         rxt_bytes 0 rxt_delivered 0 rxt_head 2803340841 rxt_ts 798754248
         prr_start 2803340841 prr_delivered 0 prr space 0
 pacer: rate 29000 bucket 0 t/p .029 last_update .009 s idle 7500
 transport: flags 0x1
 Rx fifo: cursize 40 nitems 65536 has_event 0 min_alloc 8192
          head 0 tail 40 segment manager 2
          vpp session 509 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 Tx fifo: cursize 0 nitems 65536 has_event 0 min_alloc 8192
          head 0 tail 0 segment manager 2
          vpp session 509 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 0
 session: state: transport-closing opaque: 0x0 flags: custom-fifo-tuning
/usr/bin/vpp[47]: proxy_reset_callback:208: Reset session [0:548][T] 10.0.0.2:555->10.0.0.1:37750           CLOSED         
 index: 546 cfg: TSO off flags:  timers: 
 snd_una 1 snd_nxt 1 snd_una_max 1 rcv_nxt 41 rcv_las 41
 snd_wnd 29312 rcv_wnd 64512 rcv_wscale 10 snd_wl1 1731265918 snd_wl2 1
 flight size 0 out space 4350 rcv_wnd_av 64512 tsval_recent 1951698670
 tsecr 798753725 tsecr_last_ack 0 tsval_recent_age 27 snd_mss 1448
 rto 545 rto_boff 1 srtt 149 us 496.000 rttvar 99 rtt_ts 0.0000 rtt_seq 2204656492
 next_node 0 opaque 0x0 fib_index 0
 cong:   none algo cubic cwnd 4350 ssthresh 2147483647 bytes_acked 1
         cc space 4350 prev_cwnd 0 prev_ssthresh 0
         snd_cong 2204656492 dupack 0 limited_tx 2204656492
         rxt_bytes 0 rxt_delivered 0 rxt_head 2204656492 rxt_ts 798754248
         prr_start 2204656492 prr_delivered 0 prr space 0
 pacer: rate 29194 bucket 0 t/p .029 last_update .009 s idle 7450
 transport: flags 0x1
 Rx fifo: cursize 40 nitems 65536 has_event 0 min_alloc 8192
          head 0 tail 40 segment manager 2
          vpp session 548 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 Tx fifo: cursize 0 nitems 65536 has_event 0 min_alloc 8192
          head 0 tail 0 segment manager 2
          vpp session 548 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 0
 session: state: transport-closing opaque: 0x0 flags: custom-fifo-tuning
/usr/bin/vpp[47]: proxy_reset_callback:208: Reset session [0:548][T] 10.0.0.2:555->10.0.0.1:37750           CLOSED         
 index: 546 cfg: TSO off flags:  timers: 
 snd_una 1 snd_nxt 1 snd_una_max 1 rcv_nxt 41 rcv_las 41
 snd_wnd 29312 rcv_wnd 64512 rcv_wscale 10 snd_wl1 1731265918 snd_wl2 1
 flight size 0 out space 4350 rcv_wnd_av 64512 tsval_recent 1951698670
 tsecr 798753725 tsecr_last_ack 0 tsval_recent_age 27 snd_mss 1448
 rto 545 rto_boff 1 srtt 149 us 496.000 rttvar 99 rtt_ts 0.0000 rtt_seq 2204656492
 next_node 0 opaque 0x0 fib_index 0
 cong:   none algo cubic cwnd 4350 ssthresh 2147483647 bytes_acked 1
         cc space 4350 prev_cwnd 0 prev_ssthresh 0
         snd_cong 2204656492 dupack 0 limited_tx 2204656492
         rxt_bytes 0 rxt_delivered 0 rxt_head 2204656492 rxt_ts 798754248
         prr_start 2204656492 prr_delivered 0 prr space 0
 pacer: rate 29194 bucket 0 t/p .029 last_update .009 s idle 7450
 transport: flags 0x1
 Rx fifo: cursize 40 nitems 65536 has_event 0 min_alloc 8192
          head 0 tail 40 segment manager 2
          vpp session 548 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 4294967295
 Tx fifo: cursize 0 nitems 65536 has_event 0 min_alloc 8192
          head 0 tail 0 segment manager 2
          vpp session 548 thread 0 app session 0 thread 0
          ooo pool 0 active elts newest 0
 session: state: transport-closing opaque: 0x0 flags: custom-fifo-tuning
/usr/bin/vpp[47]: /src/vpp/src/svm/svm_fifo.c:410 (svm_fifo_init_ooo_lookup) assertion `!rb_tree_is_init (&f->ooo_deq_lookup)' fails
/usr/bin/vpp[47]: /src/vpp/src/svm/svm_fifo.c:410 (svm_fifo_init_ooo_lookup) assertion `!rb_tree_is_init (&f->ooo_deq_lookup)' fails

Program received signal SIGABRT, Aborted.
0x00007ffff4723f47 in raise () from /lib/x86_64-linux-gnu/libc.so.6
#0  0x00007ffff4723f47 in raise () from /lib/x86_64-linux-gnu/libc.so.6
#1  0x00007ffff47258b1 in abort () from /lib/x86_64-linux-gnu/libc.so.6
#2  0x0000000000407193 in os_panic () at /src/vpp/src/vpp/vnet/main.c:371
#3  0x00007ffff5604619 in debugger () at /src/vpp/src/vppinfra/error.c:84
#4  0x00007ffff5604397 in _clib_error (how_to_die=2, function_name=0x0, line_number=0, 
    fmt=0x7ffff5f4d200 "%s:%d (%s) assertion `%s' fails") at /src/vpp/src/vppinfra/error.c:143
---Type <return> to continue, or q <return> to quit---
#5  0x00007ffff5f408bb in svm_fifo_init_ooo_lookup (f=0x7fff0ee4b040, ooo_type=1 '\001')
    at /src/vpp/src/svm/svm_fifo.c:410
#6  0x00007fffb106b1d7 in active_open_connected_callback (app_index=3, opaque=523, 
    s=0x7fffb5db0040, err=SESSION_E_NONE) at /src/vpp/src/plugins/hs_apps/proxy.c:404
#7  0x00007ffff745f870 in app_worker_connect_notify (app_wrk=0x7fffb51f5440, s=0x7fffb5db0040, 
    err=SESSION_E_NONE, opaque=523) at /src/vpp/src/vnet/session/application_worker.c:408
#8  0x00007ffff73f39ea in session_stream_connect_notify (tc=0x7fffb6294e80, err=SESSION_E_NONE)
    at /src/vpp/src/vnet/session/session.c:813
#9  0x00007ffff681ce67 in tcp46_syn_sent_inline (vm=0x7ffff648fb80 <vlib_global_main>, 
    node=0x7fffb52e7100, from_frame=0x7fffb5a1f300, is_ip4=1)
    at /src/vpp/src/vnet/tcp/tcp_input.c:1966
#10 0x00007ffff681c94a in tcp4_syn_sent_node_fn_hsw (vm=0x7ffff648fb80 <vlib_global_main>, 
    node=0x7fffb52e7100, from_frame=0x7fffb5a1f300) at /src/vpp/src/vnet/tcp/tcp_input.c:2057
#11 0x00007ffff61d6af6 in dispatch_node (vm=0x7ffff648fb80 <vlib_global_main>, 
    node=0x7fffb52e7100, type=VLIB_NODE_TYPE_INTERNAL, dispatch_state=VLIB_NODE_STATE_POLLING, 
    frame=0x7fffb5a1f300, last_time_stamp=1837134833586514) at /src/vpp/src/vlib/main.c:1194
#12 0x00007ffff61d75d7 in dispatch_pending_node (vm=0x7ffff648fb80 <vlib_global_main>, 
    pending_frame_index=13, last_time_stamp=1837134833586514) at /src/vpp/src/vlib/main.c:1353
#13 0x00007ffff61d11c5 in vlib_main_or_worker_loop (vm=0x7ffff648fb80 <vlib_global_main>, 
    is_main=1) at /src/vpp/src/vlib/main.c:1848
#14 0x00007ffff61d2f4a in vlib_main_loop (vm=0x7ffff648fb80 <vlib_global_main>)
    at /src/vpp/src/vlib/main.c:1976
#15 0x00007ffff61d2d17 in vlib_main (vm=0x7ffff648fb80 <vlib_global_main>, input=0x7fffb4debfa8)
---Type <return> to continue, or q <return> to quit---
    at /src/vpp/src/vlib/main.c:2222
#16 0x00007ffff625b18e in thread0 (arg=140737325366144) at /src/vpp/src/vlib/unix/main.c:660
#17 0x00007ffff56287a4 in clib_calljmp () at /src/vpp/src/vppinfra/longjmp.S:123
#18 0x00007fffffffd730 in ?? ()
#19 0x00007ffff625ad03 in vlib_unix_main (argc=17, argv=0x7fffffffec68)
    at /src/vpp/src/vlib/unix/main.c:733
#20 0x0000000000406878 in main (argc=17, argv=0x7fffffffec68)
    at /src/vpp/src/vpp/vnet/main.c:296
